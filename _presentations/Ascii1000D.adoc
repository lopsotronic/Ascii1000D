= Ascii1000D: Overview
John Mogilewsky
v0.0.1, {docdate}
:imagesdir: images
:title-slide-background-image: Ascii1000D.png
:backend: revealjs
:revealjs_theme: solarized
:revealjs_width: 1920
:icons: font

== Preliminaries

* Navigate topics with left/right arrow keys ←/→, explore existing topic with up/down arrow keys ↑/↓

* This presentation is written in Asciidoc with the Reveal.js "solarized" presentation template

* This presentation is written for the perspective of a knowledgeable Military/Defense audience interested in alternatives for heavy legacy publications platforms.

== Origins

=== XML Component Content Systems (CCS)

* DITA: Information Mapping, Minimalism, IBM, HUGHES STOP

* S1000D: ATA 100, BMoD Spec 200, DDC, AECMA Spec 1000D

* DocBook xinclude + profiles

=== S1000D as Tripartite Specification

* BA (Business Architecture) Spec: DMCs, PMs, Applic, etc

* Semantic Spec: "Procedures" represented by steps, etc

* Markup Spec: <para0/>, <step/>, XSD, etc

Takeaway: you can use the BA with another markup spec. *The S1000D WG did this themselves*, writing the spec in MS Word.

=== CCS Common Functionality

* Transclusion

* Partial Transclusion

* Conditionals

=== Lightweight Markup Languages (LMLs)

Markdown (MD), ReStructuredText (RsT), Org-Mode (ORG), LaTeX (LTX), Asciidoc (ADOC), and others.


=== CCS Functionality in Lightweight Markup

* Asciidoc (core)

* RsT (core)

* Markdown (extensions)


=== Asciidoc as Heavy Industry CCS

* DocBook XML equivalence

* Complex print output, mature table model

* Transclusion, Partial Transclusion, Conditionals

* Open standards for editing, versioning, output

* **Common standardized tooling from the software development industry: git, VSC, HTML5**

=== The Applicability Trap

image:ApplicTrapColor.png[]

New product or variant?

=== The Trap: Why does it happen?

* CCS tightly couples pubs to product architecture.

* This fundamentally changes the nature of documentation. This can go badly!
+
NOTE: Origins of CCS were pedagogy / psychiatry academics and/or extremely constrained corpus - NOT comp science or linguistics.

* "New variant of SuperPlane is also a lawnmower"

== Architecture

== Implementation

=== Version Control

* GitLab (on-prem)

* GitHub (cloud)

* BitBucket (BB)

* Git Client: Github Desktop, Gitlab GitDock, BB Client

=== Editors

* AsciidocFX: self-contained, DocBook PDF pipeline

* Visual Studio Code (VSC): "best in show" text editor, change history accessible in the editor

** VSC means you'll need some form of PDF tooling, but if you are designing for the future you will want automated PDF build anyway: asciidoctor-pdf (Ruby/prawn); asciidoctor-web-pdf (JS+CSS); FOPUB (DBXSL)

* Any text editor: NPP, Sublime, Atom, etc

=== Other Software

* WireViz: Python utility for automating wiring diagrams from textual harness description
+
NOTE: It's hard to overstate how good this is

* TextQL: Asciidoc extension for selectively including *columns* and *rows* from an external CSV file using SQL

=== Project Management

* Self-hosted OSS: GitLab, OpenProject, Redmine, Taiga, Trac, etc

* Cloud: Taiga, GitLab

* Proprietary: Azure/Teams, JIRA, GitHub, Trello

=== Build Systems

WARNING: Depending entirely on the business requirements - your org might not need a build system.

* Antora: official build engine for Asciidoc, uses asciidoctor-web-pdf, slight re-think of architecture

* DocToolChain: older pipeline, more DocBook integration

* Jenkins, Gradle, extending GitLab/GitHub

=== Output Options

[graphviz, adocpipeline8, svg]
----
digraph g {
  edge [arrowsize=".5"]
  node [shape=record]
  node [fontname="Arial" fontsize=18]
  rankdir="TD";
  "DocBook-XSL has Teledyne templates developed" [color=red]
  "PDF (paged.js)" [color=orange]
  "PDF (DocBook-XSL)" [color=red]
  "PDF (Prawn)" [color=blue]
    "Content" -> "Asciidoc"
    "Asciidoc" -> "Presentation"
    "Presentation" -> CSS
    "Presentation" -> "DocBook-XSL templates"
    "Presentation" -> "theme.yml"
    "Presentation" -> "TeX CTAN templates"
    "Presentation" -> "React.js template"
    "Asciidoc" -> HTML
    HTML -> "WeasyPrint (Python)"
    CSS -> "WeasyPrint (Python)"
    "WeasyPrint (Python)" -> "PDF (Weasyprint)"
    HTML -> "Paged.js"
    CSS -> "Paged.js"
    CSS -> "MOBI"
    CSS -> "HTML"
    "Paged.js" -> "PDF (paged.js)" [color=orange]
    "React.js template" -> "Paged.js"
    HTML -> "Prince ($$$)"
    "Prince ($$$)" -> "PDF (Prince)"
    "DocBook" -> "PDF (DocBook-XSL)"
    "DocBook-XSL templates" -> "PDF (DocBook-XSL)" [color=red]
    "DocBook" -> "Prince ($$$)"
    "Asciidoc" -> "theme.yml"
    "theme.yml" -> "PDF (Prawn)" [color=blue]
    "Asciidoc" -> "DocBook"
    "Asciidoc" -> "DBLaTeX (Python)"
    "TeX CTAN templates" -> "DBLaTeX (Python)"
    "DBLaTeX (Python)" -> "PDF (LaTeX)"
    "Asciidoc" -> "Pandoc"
    "Asciidoc" -> "CSS" -> "ePub"
    "Asciidoc" -> "MOBI"
    "Pandoc" -> "Markdown"
    "Pandoc" -> "DOCX"
    "Pandoc" -> "ReStructuredText"
    "Pandoc" -> "RTF"
    "Pandoc" -> "Man page"
    "Pandoc" -> "TexInfo"
    "Pandoc" -> "MediaWiki"
    "Pandoc" -> "OrgMode"
     "PDF (paged.js)" -> "Web-based PDF generator, 
    also built into the Antora build system" [color=orange]
    "PDF (DocBook-XSL)" -> "DocBook-XSL PDF generator, 
    available in FOPUB and the 
    easy-to-use unified solution AsciidocFX" [color=red]
    "PDF (Prawn)" -> "PDF pipeline available in the Ruby
    environment, using Prawn" [color=blue]

}
----

=== Ascii1000D PDF vs Teledyne format

image:Ascii1000dvsTeledyne.png[]

== Creating a New Project

Using Project Management software, initiate new Project

Creates a Project branch in source control

=== Establish the DMRL

* List Data Modules required for support of a Product and all its planned variants

* If not integrating with LSA, use CSV to coordinate the Data Module Codes.

** Also recommended to use Tabula to strip MICC/SNS/INCODE tables (Issue 3.0.1 of the spec for non-AVEE projects).

=== Create DMs

* Use bash or PowerShell to create Data Modules for writers.

* Check in to Project Branch.

=== Write Data Modules

* Writers get a Writer Branch.

* Writers populate content.

* Writers create issues in Project Management for missing illustrations.

=== Illustration Pipeline

WARNING: Business-dependent

* Art creation

* Illustration Control Files (ICF) control which art is visible for purposes of applicability

=== Parts Common Information Repositories (pCIRs)

* Exported from:
** CAD
** PDM
** LSAR

This will change depending on the product's maturity, and how the business decides to use the pCIR CSVs.

=== Parts Information Flow

.Parts Information Data Flow
[graphviz, JABS076, svg]
----
digraph g {
  graph [fontsize=10 fontname="Arial" compound=true];
  edge [arrowsize=".5"]
  node [shape=record]
  node [fontname="Arial" fontsize=10]
  rankdir="LR";
"Blue = git version controlled" [color=blue]
"Red = DMC process problem" [color=red]
"??Business??
??Intelligence??
??Platform??" [shape=tripleoctagon]
"??Business??
??Intelligence??
??Platform??" -> "Solid Model" [style="dotted" arrowsize=0]
"??Business??
??Intelligence??
??Platform??" -> "PDM" [style="dotted" arrowsize=0]
"??Business??
??Intelligence??
??Platform??" -> "LSAR" [style="dotted" arrowsize=0]
"Xquery" [color=blue]
"PCIR (engineering)" [color=blue]
"PCIR (release)" [color=blue]
"PCIR (production)" [color=blue]
"LSAR" -> "PCIR (production)"
"LSAR" -> "MTA" [color=red]
"MTA" -> "DMC" [color=red]
"MTA" -> "Many many many
other MX Procedures" [color=red]
"Solid Model" -> "3MF/STEP"
"PDM" -> "PCIR (release)"
"PCIR (release)" -> "Parts Data (TextQL)"
"3MF/STEP" [color=blue]
"3MF/STEP" -> "OpenCascade"
"OpenCascade" -> "SVG (PDF)"
"OpenCascade" -> "Web 3D (HTML)"
"3MF/STEP" -> "Xquery"
"Xquery" -> "PCIR (engineering)"
"PCIR (engineering)" -> "Parts Data (TextQL)"
"PCIR (production)" -> "Parts Data (TextQL)"
        subgraph cluster_01{
        color=blue;
        subgraph cluster_0 {
            subgraph cluster_1 {
            color=black;
            "Web 3D (HTML)" [color=blue];
            "SVG (PDF)" [color=blue];
            label = "ICN";
            }
        "Parts Data (TextQL)" ;
        "DMC";
        label = "MX Procedure 000" ;
    }
        "Many many many
other MX Procedures" [color=blue]
    label = "Publication Module" ;
    "User-defined Attributes
for Applicability";
    }
   
}
----

=== Other CIRs

* Acronyms
* Data Restrictions (ITAR, legal, etc)
* Admonitions (Warning/Caution/Note/Advisory)
* Material Safety Data
* Interwiring data
* Zonal information
* Many more!


=== Review: Two paths

image:CollabVsReview.png[]

(see also <<GitFlow: Collaboration, Collaboration>>)

=== Review path 1: For SMEs who are also contributors

When writer and art is complete, create a Review (SME) branch

This branch is checked out by reviewers

When the reviewers have marked up their version, SME is PR/MR (Pull Request/Merge Request) back to Writer branch

Writer may then implement or reject reviews

=== Review path 2: Review as Approval

NOTE: Simplest review process but limits how much content SME can contribute

When writer and art complete, writer puts in PR/MR vs Project branch

SME approves or rejects PR/MR.

This is the review process


=== Publication Module

Publication Module for the product is finalized from the DMRL (new project) or Change Package (revision)

Each variant may have its own PM, re-using the Data Modules as applicable

=== Publish

Project/Writer branch is merged with Master

=== Deliverables generated from Master

PMCs run on automated schedule from Master branch on successful PR/MRs

Deliverables dropped in channels (web host, network directory, etc)

=== GitFlow: Collaboration

.Ascii1000D Gitflow: SME Collaboration
[[gitflow]]
[mermaid]
----
gitGraph
   commit type: HIGHLIGHT tag: "Project branch created"
   branch Approval
   checkout Approval
   checkout main
   branch "SuperProp Feature"
   checkout "SuperProp Feature"
   commit
   branch WRITER
   checkout WRITER
   commit type: HIGHLIGHT tag: "Writer works issue feature"
   commit
   branch SME
   checkout SME
   commit type: HIGHLIGHT tag: "SME comments"
   commit
   checkout WRITER
   merge SME type: HIGHLIGHT tag: "PR SME inclusion"
   checkout "SuperProp Feature"
   merge WRITER type: HIGHLIGHT tag: "Final Review"
   commit
   commit type: HIGHLIGHT tag: "Final edits"
   checkout Approval
   merge "SuperProp Feature" type: HIGHLIGHT tag: "PR Approval of Change Package"
   checkout main
   merge Approval type: HIGHLIGHT tag: "PR Publication"
----

=== Gitflow: Review as Approval

.Ascii1000D Sample Gitflow: SME Collaboration
[[gitflow]]
[mermaid]
----
gitGraph
   commit
   branch Approval
   checkout Approval
   checkout main
   branch "SuperProp Feature" 
   checkout "SuperProp Feature"
   commit type: HIGHLIGHT tag: "Superprop Feature"
   commit
   branch WRITER
   checkout WRITER
   commit type: HIGHLIGHT tag: "Writer content"
   commit 
   checkout "SuperProp Feature"
   merge WRITER type: HIGHLIGHT tag: "PR SME Approvals"
   commit
   commit type: HIGHLIGHT tag: "Final edits"
   checkout Approval
   merge "SuperProp Feature" type: HIGHLIGHT tag: "PR Approval of Change Package"
   checkout main
   merge Approval type: HIGHLIGHT tag: "PR Publication"
----

== Revisions

=== Engineering Change to DocPlan

Evaluate engineering change by identifying the Data Modules, Variants (Applicability), and Publications affected

This listing becomes the change package, which can be run independently as a non-releasable document

WARNING: Temptation will be to use change package as a deliverable. CHANGE PACKAGE IS NOT A RELEASABLE DOCUMENT

=== Writer Branch + Review

Writer begins work on impacted Data Modules

SME review as with new Project

=== Generate Change Artifacts

*Decision point*: deliverable (PM/SB) change tracking, or DM-level change tracking?

*Revision History Table*, *List of Effective Data Modules*, and *Change Bars* are generated by diffing the Writer Branch vs the Master Branch's release states and piping this output to CSV.

Git diff allows writer to insert Asciidoc markup in place of standard *.diff markup, generating revision bars in output.

=== Merge with Master

Writer Branch is merged into Master as the approval process

=== Deliverables generated from Master

PMCs run on automated schedule from Master branch on successful PR/MRs

Deliverables dropped in channels (web host, network directory, etc)

== Complications

=== The Applicability Trap

Yes, mentioning this twice.

Bad or missing product architecture WILL result in a nonfunctional CCS system . . *regardless of the technology/markup used*.

=== Technical Skills Gap

Writers for heavy industry publications not conversant with git, full-featured text editors, or other "programmer skills"

=== Systems Ownership

Who owns the systems that are being set up? Project Management and content hosting are now the org's responsibility and not a vendor's. 

*Important*: We're not "building our own system" with Ascii1000D, we're using generally available coding platforms, but we're using it for documentation. 

Still, the point remains: the buck now stops with us.

=== Uglier Output

All modular documentation is 1) uglier, 2) clumsier, and 3) more complicated than a unified document created in a dedicated layout system (i.e., InDesign). 

*This is true for any truly modular system; performance is sacrificed for maintainability*

Modifying layouts requires special skills, either XSL-FO or Javascript + CSS.